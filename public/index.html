<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>KBase</title>
  
  <link href="knode/style.css" type="text/css" rel="stylesheet"/>
  <!-- jQuery and UI for draggable nodes -->
  <script type="text/javascript" src="knode/jquery/2.1.3/jquery.min.js"></script>
  <script type="text/javascript" src="knode/jqueryui/1.11.4/jquery-ui.min.js"></script>
  <!-- Raphael for SVG graphics -->
  <script type="text/javascript" src="knode/raphael/2.1.4/raphael-min.js"></script>
  <!-- Node map -->
  <script type="text/javascript" src="knode/nodemap.js"></script>
  
  <script type="text/javascript">
    var map, rootNode;
    $(document).ready(function() {

      map = $('#map').createNodeMap();
      map.setScale(0.5);

      // Ask for the root node in the database
      $.ajax({
        type: "POST",
        url : "/nodes/getRootNode",
        success : function(response) {
          if(response.length != 1) {
            $.error ("Expected one root node for kbase, got length of "+response.length);
            return;
          }
          var rootObj = response[0]; // {document, id, text}
          // Create the root node
          rootNode = map.createRootNode (rootObj.id, rootObj.document, rootObj.text);
        }
      });
        
    });
  </script>
  
</head>
<body>
  <div id="wrapper" style="transform-origin: 0% 0%; transform: scale(0.5); border: 2px solid black;
  overflow: hidden; height: 1200px; width:1200px;">
    <div id="map">
    </div>
  </div>
  
</body>
</html>